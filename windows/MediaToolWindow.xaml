<?xml version="1.0" encoding="UTF-8"?>
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:GamelistManager" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Class="GamelistManager.MediaToolWindow" mc:Ignorable="d" Title="Media Search" Height="480" Width="740" MinHeight="480" MinWidth="740" Closing="Window_Closing" Loaded="Window_Loaded" Background="{DynamicResource WindowBackgroundBrush}">
    <Grid Margin="0">
        <TabControl Background="Transparent" Style="{DynamicResource CustomTabControl}">
            <!-- FIND MEDIA TAB            -->
            <TabItem Header="Find Media" Style="{DynamicResource CustomTabItemStyle}">
                <Grid Width="Auto" Height="Auto" Margin="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    
                    <!--   MEDIA SEARCH CARD       -->
                   
                    <Border Grid.Row="0" Background="{DynamicResource WindowBackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="5" Margin="0,0,0,10">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.2" BlurRadius="6" />
                        </Border.Effect>
                        <StackPanel Margin="5">
                            <!-- Radio Buttons -->
                            <StackPanel Margin="5">
                                <RadioButton x:Name="radioButton_ExistingMedia" Style="{DynamicResource CustomRadioButton}" FontWeight="SemiBold" IsChecked="True" Content="Add existing media back to the current gamelist" Checked="RadioButton_ExistingMedia_Checked" />
                                <RadioButton x:Name="radioButton_NewMedia" Style="{DynamicResource CustomRadioButton}" Content="Add new media from a specified folder" Margin="0,8,0,0" Checked="RadioButton_ExistingMedia_Checked" />
                                <CheckBox x:Name="checkBox_SkipHiddenItems" Style="{DynamicResource CustomCheckBox}" IsChecked="True" Content="Skip hidden items" Margin="0,8,0,0" />
                            </StackPanel>
                            <!-- EXISTING MEDIA CONTROLS -->
                            <StackPanel x:Name="stackPanel_ExistingMediaControls" Visibility="Visible" Orientation="Vertical">
                                <Label Content="Click the Find button to search for existing media" Foreground="{DynamicResource AccentBrush}" FontSize="12" FontWeight="Regular"  Margin="0,0,0,8" />
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="button_FindExistingMediaStart" ToolTip="Find Existing Media" Style="{DynamicResource GreenRoundedButton}" Height="20" Width="60" Content="Find" Margin="0,0,8,0" Click="Button_FindExistingMedia_Click" />
                                    <Button x:Name="button_FindExistingMediaCancel" ToolTip="Cancel" Style="{DynamicResource RedRoundedButton}" Height="20" Width="60" Content="Cancel" IsEnabled="False" Margin="0,0,8,0" Click="Button_Cancel_Click" />
                                    <StackPanel Orientation="Horizontal">
                                        <Label Content="Status:" Padding="0" FontWeight="SemiBold" Foreground="{DynamicResource AccentBrush}" Margin="0,0,8,0" />
                                        <Label x:Name="label_ScanningMessage" Content="N/A" Padding="0" />
                                    </StackPanel>
                                </StackPanel>
                                <Button x:Name="button_AddExistingMedia" HorizontalAlignment="Left" Margin="10,5,0,0" ToolTip="Adds found media to the gamelist" IsEnabled="False" Style="{DynamicResource OrangeRoundedButton}" Height="20" Width="110" Content="Add To Gamelist" Click="Button_AddExistingMedia_Click" />
                            </StackPanel>
                            <!-- NEW MEDIA CONTROLS -->
                            <StackPanel x:Name="stackPanel_NewMediaControls" Visibility="Collapsed" Orientation="Vertical" Margin="0,10,0,0">
                                <Label Content="Select a folder and media type, then click the Scan button to search for possible matches" Foreground="{DynamicResource AccentBrush}" FontSize="12" Margin="0,0,0,8" />
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="button_ScanFolder" ToolTip="Select a folder to scan for new media" Style="{DynamicResource GreyRoundedButton}" Height="20" Width="90" Margin="0,0,8,0" Content="Select Folder" Click="Button_ScanFolder_Click" />
                                    <TextBox x:Name="textBox_SourceFolder" Style="{DynamicResource CustomTextBox}" MaxLines="1" MaxLength="400" IsReadOnly="True" Height="20" Width="400" Margin="0,0,8,0" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <Label Content="Media Type:" FontWeight="SemiBold" Padding="0" VerticalAlignment="Center" Margin="0,0,8,0" />
                                    <ComboBox x:Name="comboBox_MediaTypes" Style="{DynamicResource CustomComboBox}" Width="120" Height="20" IsEnabled="False" VerticalAlignment="Center" PreviewMouseLeftButtonDown="ComboBox_MediaTypes_PreviewMouseLeftButtonDown" />
                                    <Label Margin="20,0,8,0" Content="Destination:" Padding="0" VerticalAlignment="Center" FontWeight="SemiBold" />
                                    <TextBox x:Name="textBox_DestinationFolder" Style="{DynamicResource CustomTextBox}" MaxLines="1" MaxLength="70" IsReadOnly="True" Width="80" Height="20" VerticalAlignment="Center" />
                                    <Button x:Name="button_ScanForNewMediaStart" Margin="15,0,5,0" ToolTip="Scan for new media" Style="{DynamicResource GreenRoundedButton}" Height="20" Width="50" Content="Scan" IsEnabled="False" Click="Button_ScanForNewMedia_Click" />
                                    <Button x:Name="button_ScanForNewMediaCancel" ToolTip="Cancel media scan" Style="{DynamicResource RedRoundedButton}" Height="20" Width="50" Content="Cancel" IsEnabled="False" Click="Button_Cancel_Click" />
                                    <Button x:Name="button_AddNewMedia" ToolTip="Add new media to the gamelist" IsEnabled="False" Style="{DynamicResource GreenRoundedButton}" Height="20" Width="50" Content="Add" Margin="5,0,0,0" Click="Button_AddNewMedia_Click" />
                                </StackPanel>
                                <Border Background="#F8F9FA" Margin="0,5,0,0" Padding="8,4" CornerRadius="4">
                                    <StackPanel Orientation="Horizontal">
                                        <Label Content="Status:" Padding="0" FontWeight="SemiBold" Foreground="{DynamicResource AccentBrush}" Margin="0,0,8,0" />
                                        <Label x:Name="label_ScanningMessage2" Content="N/A" Padding="0" />
                                    </StackPanel>
                                </Border>
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <CheckBox x:Name="checkBox_ScanOnlyNeededMedia" Style="{DynamicResource CustomCheckBox}" IsChecked="True" ToolTip="Only items missing media will be matched" Content="Scan only for needed media" Margin="0,0,10,0" />
                                    <CheckBox x:Name="checkBox_OverwriteExisting" Style="{DynamicResource CustomCheckBox}" IsChecked="False" ToolTip="Backup existing media and then overwrite" Content="Backup and then overwrite existing media" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <!-- PROGRESS BAR -->
                    <ProgressBar Grid.Row="1" x:Name="progressBar_ProgressBar" Width="Auto" Margin="10,0,10,10" VerticalAlignment="Center" />
                    <!-- DATAGRID -->
                    <Border Grid.Row="2" BorderBrush="{DynamicResource TextBoxBorderBrush}" BorderThickness="1" CornerRadius="4" Padding="1" ClipToBounds="True">
                        <DataGrid x:Name="dataGrid_Media" BorderThickness="0" Background="{DynamicResource DataGridBackgroundBrush}" Foreground="{DynamicResource DataGridForegroundBrush}" CanUserAddRows="False" AutoGenerateColumns="False">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem x:Name="contextMenu_DeleteItems" IsEnabled="False" Header="Delete Selected Rows" Click="DeleteSelectedRows_Click" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Rom" Width="1.5*" Binding="{Binding RomPath}" IsReadOnly="True" />
                                <DataGridTextColumn Header="Media Type" Width="*" Binding="{Binding MediaType}" IsReadOnly="True" />
                                <DataGridTextColumn Header="Matched File" Width="4*" Binding="{Binding MatchedFile}" IsReadOnly="True" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>
                </Grid>
            </TabItem>
            
            <!-- CLEANUP MEDIA TAB         -->
                      
            <TabItem Header="Cleanup Media" Style="{DynamicResource CustomTabItemStyle}">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <!-- CLEANUP CARD -->
                    <Border Grid.Row="0" Background="{DynamicResource WindowBackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="5" Margin="0,0,0,10">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.2" BlurRadius="6" />
                        </Border.Effect>
                        <StackPanel Margin="5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <Button x:Name="button_ScanExistingMediaStart" Margin="0,0,8,0" VerticalAlignment="Center" ToolTip="Start Scan" Style="{DynamicResource GreenRoundedButton}" Height="20" Width="80" Content="Start Scan" Click="Button_ScanExistingMedia_Click" />
                                <Button x:Name="button_ScanExistingMediaCancel" VerticalAlignment="Center" ToolTip="Cancel Scan" Style="{DynamicResource RedRoundedButton}" IsEnabled="False" Height="20" Width="80" Content="Stop Scan" Click="Button_Cancel_Click" />
                            </StackPanel>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <CheckBox Grid.Row="0" Grid.Column="0" x:Name="checkBox_MissingMedia" Style="{DynamicResource CustomCheckBox}" Content="Missing media within the gamelist" IsChecked="True" Margin="0,0,15,0" VerticalAlignment="Center" />
                                <Label Grid.Row="0" Grid.Column="1" x:Name="label_Missing" Margin="15,0,15,0" Padding="0" VerticalAlignment="Center" />
                                <Button Grid.Row="0" Grid.Column="2" x:Name="button_FixMissing" Margin="5,0,0,0" VerticalAlignment="Center" ToolTip="Remove missing media entries in the gamelist" Style="{DynamicResource GreenRoundedButton}" IsEnabled="True" Height="20" Width="80" Content="Fix Missing" Visibility="Hidden" Click="Button_FixMissing_Click" />
                                <CheckBox Grid.Row="1" Grid.Column="0" x:Name="checkBox_UnusedMedia" Style="{DynamicResource CustomCheckBox}" Content="Unused media in the media folders" IsChecked="True" Margin="0,0,15,0" VerticalAlignment="Center" />
                                <Label Grid.Row="1" Grid.Column="1" x:Name="label_Unused" Margin="15,0,15,0" Padding="0" VerticalAlignment="Center" />
                                <Button Grid.Row="1" Grid.Column="2" x:Name="button_FixUnused" Margin="5,0,0,0" VerticalAlignment="Center" ToolTip="Backup and remove unused media" Style="{DynamicResource GreenRoundedButton}" IsEnabled="True" Height="20" Width="80" Content="Fix Unused" Visibility="Hidden" Click="Button_FixUnused_Click" />
                                <CheckBox Grid.Row="2" Grid.Column="0" x:Name="checkBox_SingleColor" Style="{DynamicResource CustomCheckBox}" Content="Single color and corrupt images" IsChecked="True" Margin="0,0,15,0" VerticalAlignment="Center" />
                                <Label Grid.Row="2" Grid.Column="1" x:Name="label_SingleColor" Margin="15,0,15,0" Padding="0" VerticalAlignment="Center" />
                                <Button Grid.Row="2" Grid.Column="2" x:Name="button_FixBad" Margin="5,0,0,0" VerticalAlignment="Center" ToolTip="Remove bad media files" Style="{DynamicResource GreenRoundedButton}" IsEnabled="True" Height="20" Width="80" Content="Fix Bad" Visibility="Hidden" Click="Button_FixBad_Click" />
                            </Grid>
                        </StackPanel>
                    </Border>
                    <!-- PROGRESS BAR -->
                    <ProgressBar Grid.Row="1" x:Name="progressBar_ProgressBar2" Width="Auto" Margin="10,0,10,10" VerticalAlignment="Center" />
                    <!-- DATAGRID -->
                    <Border Grid.Row="2" BorderBrush="{DynamicResource TextBoxBorderBrush}" BorderThickness="1" CornerRadius="4" Padding="1" ClipToBounds="True">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="6" ShadowDepth="2" Opacity="0.2" Direction="270" />
                        </Border.Effect>
                        <DataGrid x:Name="dataGrid_BadMedia" Height="Auto" BorderThickness="0" Background="{DynamicResource DataGridBackgroundBrush}" Foreground="{DynamicResource DataGridForegroundBrush}" CanUserAddRows="False" AutoGenerateColumns="False">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem x:Name="contextMenu_DeleteItems2" IsEnabled="False" Header="Delete Selected Rows" Click="ContextMenu_DeleteItems2_Click" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Status" Width="1*" Binding="{Binding Status}" IsReadOnly="True" />
                                <DataGridTextColumn Header="Media Type" Width="1*" Binding="{Binding MediaType}" IsReadOnly="True" />
                                <DataGridTextColumn Header="File Name" Width="5*" Binding="{Binding FileName}" IsReadOnly="True" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
